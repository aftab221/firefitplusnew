
/*
if(navigator.userAgent.indexOf("Chrome-Lighthouse") == -1) {
var script_loaded=!1;
  function loadJSscripts(){if(!script_loaded){script_loaded=!0;var t=document.getElementsByTagName("script");for(i=0;i<t.length;i++)null!==t[i].getAttribute("data-src")&&(t[i].setAttribute("src",t[i].getAttribute("data-src")),delete t[i].dataset.src);var e=document.getElementsByTagName("link");for(i=0;i<e.length;i++)null!==e[i].getAttribute("data-href")&&(e[i].setAttribute("href",e[i].getAttribute("data-href")),delete e[i].dataset.href);document.dispatchEvent(new CustomEvent("StartKernelLoading")),setTimeout(function(){document.dispatchEvent(new CustomEvent("StartAsyncLoading"))},40)}}
  loadJSscripts();
  window.addEventListener("scroll",function(t){loadJSscripts()}),window.addEventListener("mousemove",function(){loadJSscripts()}),window.addEventListener("touchstart",function(){loadJSscripts()}),window.addEventListener?window.addEventListener("load",function(){setTimeout(loadJSscripts,10)},!1):window.attachEvent?window.attachEvent("onload",function(){setTimeout(loadJSscripts,10)}):window.onload=loadJSscripts;
}
*/
// POP UP FIXES
var exist = setInterval(function() {
  if( $('#lowest-price-form > div').html() != '' ) {
    console.log('EXISTED');
    clearInterval(exist);
    $('.lowest-price-wrapper').show();
    $('#lowest-price-form > div button').attr('onclick', 'document.querySelector("[data-lity-close]").click()');
    var tempHTML = '';
    var html = $('#lowest-price-form > div').html();
    tempHTML = tempHTML + html;    
    $('#lowest-price-form').attr('data-html', tempHTML);
    $('.lowest-price-wrapper').on("click", function (event) {
      console.log("BUTTON CLICKED 1");
      $(this).find('#lowest-price-form > div').empty();
      $(this).find('#lowest-price-form > div').append($(this).find('#lowest-price-form').attr('data-html'));
    });
  }
}, 1000);
// POP UP FIXES END

//2 COLUMN FORMATTING SAME HEIGHT ALIGNMENT
function setSameHeight(selector) {
  var elements = document.querySelectorAll(selector);
  var maxHeight = 0;
  
  // loop through all elements to find the tallest one
  for (var i = 0; i < elements.length; i++) {
    var height = elements[i].clientHeight;
    maxHeight = Math.max(maxHeight, height);
  }
  
  // set the same height for all elements
  for (var i = 0; i < elements.length; i++) {
    elements[i].style.height = maxHeight + "px";
  }
}

// $(window).resize(function() {
//   if( matchMedia("(min-width:601px)").matches === true ) {
//     setSameHeight(".grid-container .grid-item .content");
//   }
// });

// if( matchMedia("(min-width:601px)").matches === true ) {
//   setSameHeight(".grid-container .grid-item .content");
// }
//2 COLUMN FORMATTING SAME HEIGHT ALIGNMENT END

$(document).ready(function(){      
  // $('#lowest-price-form button').click(function() {
  //   // event.preventDefault();
  //   console.log("BUTTON CLICKED 2");
  //   $('[data-lity-close]').trigger("click");
  // });  

  $("#readM").click(function(){
    $(".long_desc").addClass("show");
    $("#readM").addClass("hide");
    $("#readM").removeClass("show");
  });

  $("#readL").click(function(){
    $(".long_desc").removeClass("show");
    $("#readM").removeClass("hide");
    $("#readM").addClass("show");
  });

  $("#readMore").click(function(){
    $(".long_descs").addClass("show");
    //$(".short_descs").addClass("hide");
  });

  $("#readLess").click(function(){
    $(".long_descs").removeClass("show");
    //$(".short_descs").removeClass("hide");
  });

  
  
  if(document.location.href.indexOf('https://www.firepitsurplus.com/collections/all?sort_by=best-selling') > -1) {
     $(".results--container").html("Nothing here");
} 
  
  if ($(window).width() < 1024) {
   $(".site-header-menu-button").click(function(){
     $('.mobile-nav-content .navmenu .navmenu-item-parent:not(.navmenu-id-sale,.navmenu-id-brands,.navmenu-id-resources,.navmenu-id-blog) .navmenu-button').trigger('click');
   });
  }
});

// Envision - smooth-scroll url hash links (anchor links from other pages), as well as on-page anchor links
$(function() {
  var headerOffset = 145;
  
  function scrollToAnchor(targetElement) {
    var offset = headerOffset;
    var headerElement = $('header.site-header');
    if (headerElement.is('.traditional-header--scrolled')) {
      offset = 75;
    }
    
    if (targetElement && targetElement.length) {
      $('html, body').stop().animate({
        scrollTop: targetElement.offset().top - offset
      }, 600, 'swing');
    }
  }
  
  // start at top of page, then scroll to anchor if present
  if (window.location.hash && $(window.location.hash).length) {
    scroll(0, 0);
    scrollToAnchor($(window.location.hash));
  }
  
  // scroll to target for standard on-page anchor links
  $('a[href*="#"]').on('click', function(e) {
    var anchorId = '#' + $(this).attr('href').split('#')[1];
    var targetElement = $(anchorId);
    
    if (anchorId.length > 1 && ($(this).attr('href').includes(window.location.pathname) || !$(this).attr('href').includes('://')) && targetElement.length) {
      e.preventDefault();
      scrollToAnchor(targetElement);
    }
  });
});

